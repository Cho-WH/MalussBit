# MalussBit UX 설계 초안 (단순 스윕 버전)

> 목표: 한 번의 스윕으로 데이터를 수집하고 즉시 피팅 결과를 보여 주는 최소한의 UX를 제공한다.

---

## 1. 사용자 시나리오 요약

1. **준비 (교사)**: micro:bit와 서보 장비를 설치하고 전원을 켠다.
2. **장비 연결 (교사/학생)**: 웹앱에서 micro:bit를 Web Bluetooth로 연결하면 자동으로 RESET 명령을 전송해 서보와 내부 상태를 0° 위치로 맞춘다.
3. **측정 실행 (학생)**: `스윕 실행` 버튼을 누르면 버튼이 잠기고 0→180° 범위를 자동으로 측정한다. 펌웨어가 스윕 종료 또는 RESET 시 `END` 신호를 보내면 버튼이 다시 활성화된다.
4. **분석 (학생/교사)**: 산점도와 Malus 피팅 결과(A, B, φ₀, R²)를 확인하고 필요 시 CSV로 저장한다.
5. **재측정/정리**: 필요 시 `RESET` 버튼으로 상태를 초기화한 뒤 반복 측정을 수행하고, 결과를 수업 자료로 활용한다.

---

## 2. 핵심 UX 원칙

- **최소 조작**: 연결과 단일 버튼만으로 측정이 진행되도록 유지한다.
- **즉시 피드백**: 스윕 종료 후 그래프 및 피팅 결과를 바로 갱신한다.
- **단순 레이아웃**: 좌측은 연결/스윕, 우측은 그래프와 결과 카드·로그로 구성한다.
- **시뮬레이션 지원**: Mock 모드에서 동일한 흐름을 재현해 장치 없이도 시연할 수 있다.

---

## 3. 화면 구성 개요

### 3.1 좌측 패널
- **연결 패널**: 연결 상태, 최근 수신 시간, 오류 안내를 표시한다.
- **측정 제어**: `스윕 실행`, `RESET` 두 버튼으로 구성한다. 실행 도중에는 스윕 버튼을 비활성화하고, RESET은 명령 송신 중 상태를 표시한다.

### 3.2 우측 메인 영역
- **산점도 카드**: 각도-조도 데이터를 스트리밍으로 표시하고, 피팅 결과가 있으면 곡선을 오버레이한다.
- **피팅 결과 카드**: 자동 계산된 파라미터(A, B, φ₀, R²)를 보여 주고, 필요 시 `피팅 실행` 버튼으로 재실행한다.
- **데이터 로그**: 최근 샘플과 CSV 다운로드 버튼을 제공한다.

---

## 4. 인터랙션 흐름

1. 연결이 완료되면 앱은 RESET 명령을 보내 서보와 내부 상태를 0°로 동기화한다.
2. 사용자가 `스윕 실행`을 누르면 `SWEEP` 명령을 전송하고, 버튼은 `running` 상태로 잠긴다. 펌웨어는 0→180° 범위를 50 ms 간격으로 스윕하며, 중간에 `RESET`/`STOP`을 받으면 즉시 중단한다.
3. 수신된 샘플은 즉시 그래프와 로그에 반영되고, 12개 이상이 모이면 자동으로 피팅을 수행한다.
4. 펌웨어는 스윕 종료 또는 강제 중단 후 `END` 메시지를 전송한다. 웹앱은 이를 감지해 버튼 상태를 `idle`로 돌려 사용자에게 재측정 가능 여부를 알린다.
5. 사용자는 언제든 `RESET` 버튼으로 데이터를 지우고 초기 상태를 재구성할 수 있다. 연결이 끊기면 스토어를 초기화하고 오류 안내를 표시한다.

---

## 5. 향후 확장 아이디어

- 반복 스윕, 노트 기록 등 교사용 보조 기능 추가.
- Mock 모드에서 위상/노이즈 파라미터를 다양화하여 수업용 데모를 풍부하게 구성.
- 자동 보정(영점/편광 정렬) 워크플로우와 테스트 체크리스트 작성.

---

## 6. 접근성 및 피드백

- Web Bluetooth 미지원 브라우저 안내는 상단 배너로 제공한다.
- 스윕 진행 중에는 버튼 비활성, RESET 진행 중에는 재중복 입력 방지를 위해 비활성 처리한다.
- 펌웨어에서 오는 `END` 메시지 또는 연결 해제 이벤트를 받아 버튼 상태와 오류 메시지를 즉시 갱신한다.
- 그래프 색상 대비와 피팅 곡선의 시인성을 유지한다.
